# https://taskfile.dev

version: '3'

tasks:
  default:
    desc: Runs the tasks build, ...
    cmds:
      - task: format
      - task: test
      - task: build

  get-roc:
    desc: Downloads the latest nightly build of roc and unzips it
    cmds:
      - wget https://github.com/roc-lang/roc/releases/download/nightly/roc_nightly-linux_x86_64-latest.tar.gz --output-document roc.tar.gz
      - tar -xf roc.tar.gz
      - rm roc.tar.gz

  format:
    desc: Formats roc files
    cmds:
      - roc format main.roc
      - roc check
    sources:
      - main.roc

  test:
    desc: Runs tests
    cmds:
      - roc test
    sources:
      - main.roc

  build:
    desc: Builds project without running it
    cmds:
      - roc build
    sources:
      - main.roc
    generates:
      - main
